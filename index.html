fetch(webhookUrl, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: jsonData
            })
            .then(response => response.text())
            .then(data => {
                if (data && data.trim()) {
                    try {
                        // Parse the webhook response
                        const parsedData = JSON.parse(data);
                        if (Array.isArray(parsedData) && parsedData.length > 0 && parsedData[0].body) {
                            // Extract just the record ID from the response
                            const recordId = parsedData[0].body;
                            window.location.href = `results.html?recordId=${recordId}`;
                        } else {
                            throw new Error('Invalid response format');
                        }
                    } catch (e) {
                        console.error('Error parsing response:', e);
                        // Fallback: try to use the response directly if it's not JSON
                        if (data.trim()) {
                            window.location.href = `results.html?recordId=${data.trim()}`;
                        } else {
                            throw new Error('Invalid response format');
                        }
                    }
                } else {
                    throw new Error('No data received');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Error processing data. Please try again.');
            })
            .finally(() => {
                loadingOverlay.style.display = 'none';
            });
